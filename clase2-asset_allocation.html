
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>5. Teoría Moderna de Portafolios &#8212; Apunte Finanzas Computacionales</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'clase2-asset_allocation';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="4. Análisis técnico" href="clase2-technical_analysis.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.jpg" class="logo__image only-light" alt="Apunte Finanzas Computacionales - Home"/>
    <script>document.write(`<img src="_static/logo.jpg" class="logo__image only-dark" alt="Apunte Finanzas Computacionales - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Apunte de Finanzas Computacionales
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="clase1-pandas.html">0. Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="clase1-get_data.html">1. Carga de datos finacieros</a></li>
<li class="toctree-l1"><a class="reference internal" href="clase1-graph.html">2. Graficando series financieras</a></li>
<li class="toctree-l1"><a class="reference internal" href="clase2-returns.html">3. Series de retornos</a></li>
<li class="toctree-l1"><a class="reference internal" href="clase2-technical_analysis.html">4. Análisis técnico</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">5. Teoría Moderna de Portafolios</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/caracena/apunte-finanzas-computacionales/blob/main/clase2-asset_allocation.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/caracena/apunte-finanzas-computacionales" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/caracena/apunte-finanzas-computacionales/issues/new?title=Issue%20on%20page%20%2Fclase2-asset_allocation.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/clase2-asset_allocation.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>5. Teoría Moderna de Portafolios</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#construccion-de-un-portfolio-equally-weighted">Construcción de un portfolio <em>equally weighted</em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#frontera-eficiente">Frontera eficiente</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="teoria-moderna-de-portafolios">
<h1>5. Teoría Moderna de Portafolios<a class="headerlink" href="#teoria-moderna-de-portafolios" title="Link to this heading">#</a></h1>
<p>La Teoría Moderna de Portafolios (TMP), desarrollada por Harry Markowitz en la década de 1950, es el pilar de las finanzas cuantitativas modernas y de la gestión de inversiones institucionales.
Su propósito central es maximizar el rendimiento esperado de una cartera para un nivel de riesgo dado, o minimizar el riesgo para un nivel de rendimiento deseado.</p>
<section id="construccion-de-un-portfolio-equally-weighted">
<h2>Construcción de un portfolio <em>equally weighted</em><a class="headerlink" href="#construccion-de-un-portfolio-equally-weighted" title="Link to this heading">#</a></h2>
<p>Un portfolio <em>equally weighted</em> consiste en invertir el mismo porcentaje del dinero asignado en cada uno de los activos del portfolio, esto es, $w_i = 1/n$, donde $n$ corresponde a la cantidad de activos en el portfolio. Para este ejemplo, construiremos un portfolio con 5 acciones: <em>TSLA</em>, <em>IBM</em>, <em>AAPL</em>, <em>NVDA</em>, <em>INTC</em>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">yfinance</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">yf</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="n">activos</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;TSLA&quot;</span><span class="p">,</span> <span class="s2">&quot;IBM&quot;</span><span class="p">,</span> <span class="s2">&quot;AAPL&quot;</span><span class="p">,</span> <span class="s2">&quot;NVDA&quot;</span><span class="p">,</span> <span class="s2">&quot;INTC&quot;</span><span class="p">]</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">activos</span><span class="p">)</span>

<span class="n">precios</span> <span class="o">=</span> <span class="n">yf</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">activos</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="s2">&quot;2024-01-01&quot;</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="s2">&quot;2024-12-31&quot;</span><span class="p">,</span> <span class="n">auto_adjust</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">multi_level_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">precios</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[*********************100%***********************]  5 of 5 completed
</pre></div>
</div>
<div class="output text_html">
  <div id="df-a53f517b-eee4-41c1-a22c-afac3ad0df2f" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th>Price</th>
      <th colspan="5" halign="left">Close</th>
      <th colspan="5" halign="left">High</th>
      <th>...</th>
      <th colspan="5" halign="left">Open</th>
      <th colspan="5" halign="left">Volume</th>
    </tr>
    <tr>
      <th>Ticker</th>
      <th>AAPL</th>
      <th>IBM</th>
      <th>INTC</th>
      <th>NVDA</th>
      <th>TSLA</th>
      <th>AAPL</th>
      <th>IBM</th>
      <th>INTC</th>
      <th>NVDA</th>
      <th>TSLA</th>
      <th>...</th>
      <th>AAPL</th>
      <th>IBM</th>
      <th>INTC</th>
      <th>NVDA</th>
      <th>TSLA</th>
      <th>AAPL</th>
      <th>IBM</th>
      <th>INTC</th>
      <th>NVDA</th>
      <th>TSLA</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2024-01-02</th>
      <td>184.081528</td>
      <td>152.777466</td>
      <td>47.168278</td>
      <td>48.143856</td>
      <td>248.419998</td>
      <td>186.858024</td>
      <td>154.470782</td>
      <td>48.727398</td>
      <td>49.270290</td>
      <td>251.250000</td>
      <td>...</td>
      <td>185.578846</td>
      <td>154.035635</td>
      <td>48.549777</td>
      <td>49.219317</td>
      <td>250.080002</td>
      <td>82488700</td>
      <td>3825000</td>
      <td>45905700</td>
      <td>411254000</td>
      <td>104654200</td>
    </tr>
    <tr>
      <th>2024-01-03</th>
      <td>182.703156</td>
      <td>151.453094</td>
      <td>46.428196</td>
      <td>47.545158</td>
      <td>238.449997</td>
      <td>184.319476</td>
      <td>152.995049</td>
      <td>47.178154</td>
      <td>48.159848</td>
      <td>245.679993</td>
      <td>...</td>
      <td>182.673409</td>
      <td>152.304480</td>
      <td>46.477534</td>
      <td>47.461201</td>
      <td>244.979996</td>
      <td>58414500</td>
      <td>4086100</td>
      <td>35858400</td>
      <td>320896000</td>
      <td>121082600</td>
    </tr>
    <tr>
      <th>2024-01-04</th>
      <td>180.382828</td>
      <td>152.172043</td>
      <td>46.250572</td>
      <td>47.973946</td>
      <td>237.929993</td>
      <td>181.552914</td>
      <td>153.070731</td>
      <td>46.536741</td>
      <td>48.475693</td>
      <td>242.699997</td>
      <td>...</td>
      <td>180.620803</td>
      <td>151.566609</td>
      <td>45.115773</td>
      <td>47.743059</td>
      <td>239.250000</td>
      <td>71983600</td>
      <td>3212000</td>
      <td>47797800</td>
      <td>306535000</td>
      <td>102629300</td>
    </tr>
    <tr>
      <th>2024-01-05</th>
      <td>179.658951</td>
      <td>150.563858</td>
      <td>46.270309</td>
      <td>49.072392</td>
      <td>237.490005</td>
      <td>181.225688</td>
      <td>151.878784</td>
      <td>47.197889</td>
      <td>49.522167</td>
      <td>240.119995</td>
      <td>...</td>
      <td>180.462163</td>
      <td>151.273351</td>
      <td>46.408459</td>
      <td>48.437711</td>
      <td>236.860001</td>
      <td>62379700</td>
      <td>4199400</td>
      <td>34344000</td>
      <td>415039000</td>
      <td>92488900</td>
    </tr>
    <tr>
      <th>2024-01-08</th>
      <td>184.002167</td>
      <td>152.436920</td>
      <td>47.809692</td>
      <td>52.226814</td>
      <td>240.449997</td>
      <td>184.041839</td>
      <td>152.512601</td>
      <td>48.115593</td>
      <td>52.248806</td>
      <td>241.250000</td>
      <td>...</td>
      <td>180.561297</td>
      <td>150.119246</td>
      <td>46.447929</td>
      <td>49.487190</td>
      <td>236.139999</td>
      <td>59144500</td>
      <td>3321700</td>
      <td>42135100</td>
      <td>642510000</td>
      <td>85166600</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 25 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-a53f517b-eee4-41c1-a22c-afac3ad0df2f')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-a53f517b-eee4-41c1-a22c-afac3ad0df2f button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-a53f517b-eee4-41c1-a22c-afac3ad0df2f');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


    <div id="df-38164a3a-dffa-4d72-be40-7941b235a2ed">
      <button class="colab-df-quickchart" onclick="quickchart('df-38164a3a-dffa-4d72-be40-7941b235a2ed')"
                title="Suggest charts"
                style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
      </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

      <script>
        async function quickchart(key) {
          const quickchartButtonEl =
            document.querySelector('#' + key + ' button');
          quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
          quickchartButtonEl.classList.add('colab-df-spinner');
          try {
            const charts = await google.colab.kernel.invokeFunction(
                'suggestCharts', [key], {});
          } catch (error) {
            console.error('Error during call to suggestCharts:', error);
          }
          quickchartButtonEl.classList.remove('colab-df-spinner');
          quickchartButtonEl.classList.add('colab-df-quickchart-complete');
        }
        (() => {
          let quickchartButtonEl =
            document.querySelector('#df-38164a3a-dffa-4d72-be40-7941b235a2ed button');
          quickchartButtonEl.style.display =
            google.colab.kernel.accessAllowed ? 'block' : 'none';
        })();
      </script>
    </div>

    </div>
  </div>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">precios</span><span class="p">[</span><span class="s2">&quot;Close&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Stocks en 2024&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: title={&#39;center&#39;: &#39;Stocks en 2024&#39;}, xlabel=&#39;Date&#39;&gt;
</pre></div>
</div>
<img alt="_images/5074bdbcf50cb635c1fa605d6a6a9c0a685d84255d7b522a9f6ca554eeb1f1b5.png" src="_images/5074bdbcf50cb635c1fa605d6a6a9c0a685d84255d7b522a9f6ca554eeb1f1b5.png" />
</div>
</div>
<p>Calculamos retornos simples</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">retornos</span> <span class="o">=</span> <span class="n">precios</span><span class="p">[</span><span class="s2">&quot;Close&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="n">retornos</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
  <div id="df-167fca8e-b2ab-449f-8024-b821eb29f035" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Ticker</th>
      <th>AAPL</th>
      <th>IBM</th>
      <th>INTC</th>
      <th>NVDA</th>
      <th>TSLA</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2024-01-03</th>
      <td>-0.007488</td>
      <td>-0.008669</td>
      <td>-0.015690</td>
      <td>-0.012436</td>
      <td>-0.040134</td>
    </tr>
    <tr>
      <th>2024-01-04</th>
      <td>-0.012700</td>
      <td>0.004747</td>
      <td>-0.003826</td>
      <td>0.009019</td>
      <td>-0.002181</td>
    </tr>
    <tr>
      <th>2024-01-05</th>
      <td>-0.004013</td>
      <td>-0.010568</td>
      <td>0.000427</td>
      <td>0.022897</td>
      <td>-0.001849</td>
    </tr>
    <tr>
      <th>2024-01-08</th>
      <td>0.024175</td>
      <td>0.012440</td>
      <td>0.033269</td>
      <td>0.064281</td>
      <td>0.012464</td>
    </tr>
    <tr>
      <th>2024-01-09</th>
      <td>-0.002263</td>
      <td>-0.006578</td>
      <td>-0.008256</td>
      <td>0.016975</td>
      <td>-0.022832</td>
    </tr>
  </tbody>
</table>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-167fca8e-b2ab-449f-8024-b821eb29f035')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-167fca8e-b2ab-449f-8024-b821eb29f035 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-167fca8e-b2ab-449f-8024-b821eb29f035');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


    <div id="df-19f28101-b23f-46d2-aa60-a3642ed2a25d">
      <button class="colab-df-quickchart" onclick="quickchart('df-19f28101-b23f-46d2-aa60-a3642ed2a25d')"
                title="Suggest charts"
                style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
      </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

      <script>
        async function quickchart(key) {
          const quickchartButtonEl =
            document.querySelector('#' + key + ' button');
          quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
          quickchartButtonEl.classList.add('colab-df-spinner');
          try {
            const charts = await google.colab.kernel.invokeFunction(
                'suggestCharts', [key], {});
          } catch (error) {
            console.error('Error during call to suggestCharts:', error);
          }
          quickchartButtonEl.classList.remove('colab-df-spinner');
          quickchartButtonEl.classList.add('colab-df-quickchart-complete');
        }
        (() => {
          let quickchartButtonEl =
            document.querySelector('#df-19f28101-b23f-46d2-aa60-a3642ed2a25d button');
          quickchartButtonEl.style.display =
            google.colab.kernel.accessAllowed ? 'block' : 'none';
        })();
      </script>
    </div>

    </div>
  </div>
</div></div>
</div>
<p>Luego, deberemos definir una lista donde cada componente sea igual a $1/n = 1/5 = 0.2$. Para ello usamos la siguiente sintaxis: <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">*</span> <span class="pre">[1/n]</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pesos</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="n">n</span><span class="p">]</span>
<span class="n">pesos</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0.2, 0.2, 0.2, 0.2, 0.2]
</pre></div>
</div>
</div>
</div>
<p>Ahora, lo que deberemos hacer es multiplicar la matriz de retornos por el vector de pesos para obtener la rentabilidad del portfolio, esto es:</p>
<p>$$r_{p,t} = \sum_{i=1}^n w_{i,t} \times r_{i,t}$$</p>
<p>Entonces, deberemos invertir la matriz de retornos usando el método <code class="docutils literal notranslate"><span class="pre">T</span></code>, y haciendo la sumaproducto. Esto último se hace con el método <code class="docutils literal notranslate"><span class="pre">dot</span></code> de Numpy. Finalmente, convertiremos el resultado en formato pandas para poder seguir trabajando con los resultados.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">pesos</span><span class="p">,</span> <span class="n">retornos</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">retornos</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">rp</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2024-01-03</th>
      <td>-0.016883</td>
    </tr>
    <tr>
      <th>2024-01-04</th>
      <td>-0.000988</td>
    </tr>
    <tr>
      <th>2024-01-05</th>
      <td>0.001379</td>
    </tr>
    <tr>
      <th>2024-01-08</th>
      <td>0.029326</td>
    </tr>
    <tr>
      <th>2024-01-09</th>
      <td>-0.004591</td>
    </tr>
  </tbody>
</table>
</div><br><label><b>dtype:</b> float64</label></div></div>
</div>
<p>Una librería útil para poder estudiar la rentabilidad de un portfolio es <code class="docutils literal notranslate"><span class="pre">quantstats</span></code>. Esta permite graficar el rendimiento de un activo o portfolio, pero también nos permite obtener métricas de rendimiento.</p>
<p>Una de las métricas mas relevantes de rendimiento de portafolios es el Sharpe Ratio.</p>
<p>$$ S = \frac{E[R_p] - R_f}{\sigma_p} $$</p>
<p>El Sharpe Ratio mide cuánto retorno excedente (sobre la tasa libre de riesgo) genera una inversión por unidad de riesgo asumido.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>quantstats<span class="w"> </span>--quiet

<span class="kn">import</span><span class="w"> </span><span class="nn">quantstats</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">qs</span>

<span class="n">qs</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">snapshot</span><span class="p">(</span><span class="n">rp</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Rendimiento del portfolio equally-weighted&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
</pre></div>
</div>
<img alt="_images/53c3b10e3727755b0f31670bae7bf83355b8412aebc9e7f8cae079b1f678a373.png" src="_images/53c3b10e3727755b0f31670bae7bf83355b8412aebc9e7f8cae079b1f678a373.png" />
</div>
</div>
<p>Para obtener métricas se debe utilizar el método <code class="docutils literal notranslate"><span class="pre">reports.metrics</span></code>. En él se debe especificar:</p>
<ul class="simple">
<li><p>benchmark: El benchmark a utilizar. Puede ser una Serie de Pandas o un ticker (lo descarga desde Yahoo! Finance, por lo que se debe llamar a la librería <code class="docutils literal notranslate"><span class="pre">yfinance</span></code>)</p></li>
<li><p>rf: Retorno del activo libre de riesgo. En este caso usaré los bonos a 10 años plazo.</p></li>
<li><p>mode: puede ser “basic” o “full”.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># tasa libre de riesgo</span>
<span class="n">rf</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="mf">0.04</span><span class="o">/</span><span class="mi">252</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">rf</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.00016
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">qs</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">metrics</span><span class="p">(</span><span class="n">rp</span><span class="p">,</span> <span class="n">benchmark</span> <span class="o">=</span> <span class="s2">&quot;^GSPC&quot;</span><span class="p">,</span> <span class="n">rf</span> <span class="o">=</span> <span class="n">rf</span><span class="p">,</span> <span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;basic&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                     Benchmark (^GSPC)    Strategy
-------------------  -------------------  ----------
Start Period         2024-01-03           2024-01-03
End Period           2024-12-30           2024-12-30
Risk-Free Rate       0.02%                0.02%
Time in Market       100.0%               100.0%

Cumulative Return    25.55%               42.86%
CAGR﹪               25.78%               43.26%

Sharpe               1.88                 1.46
Prob. Sharpe Ratio   96.45%               92.28%
Sortino              2.72                 2.11
Sortino/√2           1.92                 1.5
Omega                1.28                 1.28

Max Drawdown         -8.49%               -21.73%
Max DD Date          2024-08-05           2024-08-07
Max DD Period Start  2024-07-17           2024-07-11
Max DD Period End    2024-09-18           2024-11-05
Longest DD Days      64                   118

Gain/Pain Ratio      0.38                 0.28
Gain/Pain (1M)       3.3                  2.62

Payoff Ratio         0.97                 0.94
Profit Factor        1.38                 1.28
Common Sense Ratio   1.22                 1.25
CPC Index            0.77                 0.68
Tail Ratio           0.88                 0.97
Outlier Win Ratio    5.08                 2.4
Outlier Loss Ratio   5.98                 2.67

MTD                  -2.08%               0.85%
3M                   2.94%                12.85%
6M                   8.18%                23.31%
YTD                  25.55%               42.86%
1Y                   25.55%               42.86%
3Y (ann.)            25.78%               43.26%
5Y (ann.)            25.78%               43.26%
10Y (ann.)           25.78%               43.26%
All-time (ann.)      25.78%               43.26%

Avg. Drawdown        -1.2%                -3.39%
Avg. Drawdown Days   8                    14
Recovery Factor      2.78                 1.81
Ulcer Index          0.02                 0.07
Serenity Index       0.81                 0.83
</pre></div>
</div>
</div>
</div>
<p>Usando el método <code class="docutils literal notranslate"><span class="pre">reports.html</span></code> se puede crear un reporte en formato html con los gráficos y métricas para analizar al portfolio.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">qs</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">html</span><span class="p">(</span><span class="n">rp</span><span class="p">,</span> <span class="n">benchmark</span> <span class="o">=</span> <span class="s2">&quot;^GSPC&quot;</span><span class="p">,</span> <span class="n">rf</span> <span class="o">=</span> <span class="n">rf</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Rendimiento del portfolio equally-weighted&quot;</span><span class="p">,</span> <span class="n">download_filename</span> <span class="o">=</span> <span class="s2">&quot;reporte.html&quot;</span><span class="p">,</span> <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;reporte.html&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
WARNING:matplotlib.font_manager:findfont: Font family &#39;Arial&#39; not found.
</pre></div>
</div>
</div>
</div>
</section>
<section id="frontera-eficiente">
<h2>Frontera eficiente<a class="headerlink" href="#frontera-eficiente" title="Link to this heading">#</a></h2>
<p>La <em>Frontera eficiente</em> corresponde a las mejores combinaciones de <strong>riesgo</strong> y <strong>retorno</strong> de un conjunto de activos. Para conocer esta frontera, se debe resolver el siguiente problema:</p>
<p>$$\min W’ \Sigma W $$
$$s.a. E(r_p) = W \times E(r_i)$$
$$ W’\mathbf{1} = 1 $$
$$ W \gt 0 $$</p>
<p>En otras palabras, la frontera eficiente son las mejores combinaciones de riesgo-retorno que podemos encontrar con $n$ activos. Para construirla debemos resolver este problema de optimización dado los distintos retornos esperados que necesitemos. Una forma sencilla de realizarlo es a través del módulo <code class="docutils literal notranslate"><span class="pre">optimize</span></code>de <code class="docutils literal notranslate"><span class="pre">scipy</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">scipy.optimize</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sco</span>
</pre></div>
</div>
</div>
</div>
<p>Dado que este es un proceso iterativo, deberemos construir algunas funciones:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># obtener el retorno del portafolio</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_portf_rtn</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">avg_rtns</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">avg_rtns</span> <span class="o">*</span> <span class="n">w</span><span class="p">)</span>

<span class="c1"># obtener la volatilidad del portafolio</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_portf_vol</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">avg_rtns</span><span class="p">,</span> <span class="n">cov_mat</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">cov_mat</span><span class="p">,</span> <span class="n">w</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_efficient_frontier</span><span class="p">(</span><span class="n">avg_rtns</span><span class="p">,</span> <span class="n">cov_mat</span><span class="p">,</span> <span class="n">rtns_range</span><span class="p">):</span>

    <span class="n">efficient_portfolios</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">n_assets</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">avg_returns</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">avg_returns</span><span class="p">,</span> <span class="n">cov_mat</span><span class="p">)</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">asset</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_assets</span><span class="p">))</span>
    <span class="n">initial_guess</span> <span class="o">=</span> <span class="n">n_assets</span> <span class="o">*</span> <span class="p">[</span><span class="mf">1.</span> <span class="o">/</span> <span class="n">n_assets</span><span class="p">,</span> <span class="p">]</span>

    <span class="k">for</span> <span class="n">ret</span> <span class="ow">in</span> <span class="n">rtns_range</span><span class="p">:</span>
        <span class="n">constr</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;eq&quot;</span><span class="p">,</span>
             <span class="s2">&quot;fun&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">get_portf_rtn</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">avg_rtns</span><span class="p">)</span> <span class="o">-</span> <span class="n">ret</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;eq&quot;</span><span class="p">,</span>
             <span class="s2">&quot;fun&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="n">ef_portf</span> <span class="o">=</span> <span class="n">sco</span><span class="o">.</span><span class="n">minimize</span><span class="p">(</span><span class="n">get_portf_vol</span><span class="p">,</span>
                                <span class="n">initial_guess</span><span class="p">,</span>
                                <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;SLSQP&quot;</span><span class="p">,</span>
                                <span class="n">constraints</span><span class="o">=</span><span class="n">constr</span><span class="p">,</span>
                                <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">)</span>
        <span class="n">efficient_portfolios</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ef_portf</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">efficient_portfolios</span>
</pre></div>
</div>
</div>
</div>
<p>Para este ejemplo asumiremos que el retorno esperado es igual al retorno promedio histórico. Este es un <strong>pésimo supuesto</strong>, dado que estamos considerando que el pasado es igual al futuro. Dado que tenemos datos diarios, lo anualizaremos multiplicándolos por 252 días. A su vez, calcularemos la matriz de covarianza de forma análoga.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">avg_returns</span> <span class="o">=</span> <span class="n">retornos</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">*</span> <span class="mi">252</span>
<span class="n">cov_mat</span> <span class="o">=</span> <span class="n">retornos</span><span class="o">.</span><span class="n">cov</span><span class="p">()</span> <span class="o">*</span> <span class="mi">252</span>
</pre></div>
</div>
</div>
</div>
<p>Definiremos distintos valores objetivo de retorno esperado:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rtns_range</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.55</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Luego, correremos el proceso de optimización:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">efficient_portfolios</span> <span class="o">=</span> <span class="n">get_efficient_frontier</span><span class="p">(</span><span class="n">avg_returns</span><span class="p">,</span>
                                              <span class="n">cov_mat</span><span class="p">,</span>
                                              <span class="n">rtns_range</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">efficient_portfolios</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     message: Optimization terminated successfully
     success: True
      status: 0
         fun: 0.20276939215206774
           x: [ 4.289e-01  3.367e-01  2.344e-01  0.000e+00  1.494e-16]
         nit: 5
         jac: [ 1.458e-01  1.369e-01  4.017e-01  1.947e-01  2.011e-01]
        nfev: 30
        njev: 5
 multipliers: [-2.385e-01  2.266e-01]
</pre></div>
</div>
</div>
</div>
<p>Rescataremos las varianzas del portfolio desde el proceso de optimización:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vols_range</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;fun&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">efficient_portfolios</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Finalmente, graficamos:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">vols_range</span><span class="p">,</span> <span class="n">rtns_range</span><span class="p">,</span> <span class="s2">&quot;b--&quot;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Volatility&quot;</span><span class="p">,</span>
        <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Expected Returns&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Efficient Frontier&quot;</span><span class="p">)</span>

<span class="n">sns</span><span class="o">.</span><span class="n">despine</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/54d159de4a269744ee16648c30f0e25e6fe4ced0d58d9c6829df37228b29e970.png" src="_images/54d159de4a269744ee16648c30f0e25e6fe4ced0d58d9c6829df37228b29e970.png" />
</div>
</div>
<p>¿Por qué la frontera eficiente tiene esta forma? Calculemos portfolios aleatorios para incorporarlos al gráfico:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">5</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span>
<span class="n">weights</span> <span class="o">/=</span>  <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">weights</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Y en base a ellos, calculemos retorno esperado, varianza, y ratio de Sharpe:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">portf_rtns</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">weights</span><span class="p">,</span> <span class="n">avg_returns</span><span class="p">)</span>

<span class="n">portf_vol</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">weights</span><span class="p">)):</span>
    <span class="n">vol</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span>
        <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">weights</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">cov_mat</span><span class="p">,</span> <span class="n">weights</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
    <span class="p">)</span>
    <span class="n">portf_vol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vol</span><span class="p">)</span>
<span class="n">portf_vol</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">portf_vol</span><span class="p">)</span>

<span class="n">portf_sharpe_ratio</span> <span class="o">=</span> <span class="p">(</span><span class="n">portf_rtns</span> <span class="o">-</span> <span class="n">rf</span><span class="o">*</span><span class="mi">252</span><span class="p">)</span> <span class="o">/</span> <span class="n">portf_vol</span>

<span class="n">portf_results_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span><span class="s2">&quot;returns&quot;</span><span class="p">:</span> <span class="n">portf_rtns</span><span class="p">,</span>
     <span class="s2">&quot;volatility&quot;</span><span class="p">:</span> <span class="n">portf_vol</span><span class="p">,</span>
     <span class="s2">&quot;sharpe_ratio&quot;</span><span class="p">:</span> <span class="n">portf_sharpe_ratio</span><span class="p">}</span>
<span class="p">)</span>

<span class="n">portf_results_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
  <div id="df-dbea1a5c-ed93-4975-86a6-48683e38c843" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>returns</th>
      <th>volatility</th>
      <th>sharpe_ratio</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.546424</td>
      <td>0.294402</td>
      <td>1.719094</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.292889</td>
      <td>0.249217</td>
      <td>1.013447</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.216913</td>
      <td>0.245357</td>
      <td>0.719739</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.559964</td>
      <td>0.284317</td>
      <td>1.827688</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.354165</td>
      <td>0.266988</td>
      <td>1.175498</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>99995</th>
      <td>0.334461</td>
      <td>0.303220</td>
      <td>0.970058</td>
    </tr>
    <tr>
      <th>99996</th>
      <td>0.273461</td>
      <td>0.270039</td>
      <td>0.863361</td>
    </tr>
    <tr>
      <th>99997</th>
      <td>0.521694</td>
      <td>0.277988</td>
      <td>1.731638</td>
    </tr>
    <tr>
      <th>99998</th>
      <td>0.643011</td>
      <td>0.305072</td>
      <td>1.975568</td>
    </tr>
    <tr>
      <th>99999</th>
      <td>0.470980</td>
      <td>0.308240</td>
      <td>1.397159</td>
    </tr>
  </tbody>
</table>
<p>100000 rows × 3 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-dbea1a5c-ed93-4975-86a6-48683e38c843')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-dbea1a5c-ed93-4975-86a6-48683e38c843 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-dbea1a5c-ed93-4975-86a6-48683e38c843');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


    <div id="df-cbb3b8ea-0801-4277-bac1-c83115a1415f">
      <button class="colab-df-quickchart" onclick="quickchart('df-cbb3b8ea-0801-4277-bac1-c83115a1415f')"
                title="Suggest charts"
                style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
      </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

      <script>
        async function quickchart(key) {
          const quickchartButtonEl =
            document.querySelector('#' + key + ' button');
          quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
          quickchartButtonEl.classList.add('colab-df-spinner');
          try {
            const charts = await google.colab.kernel.invokeFunction(
                'suggestCharts', [key], {});
          } catch (error) {
            console.error('Error during call to suggestCharts:', error);
          }
          quickchartButtonEl.classList.remove('colab-df-spinner');
          quickchartButtonEl.classList.add('colab-df-quickchart-complete');
        }
        (() => {
          let quickchartButtonEl =
            document.querySelector('#df-cbb3b8ea-0801-4277-bac1-c83115a1415f button');
          quickchartButtonEl.style.display =
            google.colab.kernel.accessAllowed ? 'block' : 'none';
        })();
      </script>
    </div>

  <div id="id_c3085aaf-d30f-4718-aa39-e1f170d2befc">
    <style>
      .colab-df-generate {
        background-color: #E8F0FE;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        display: none;
        fill: #1967D2;
        height: 32px;
        padding: 0 0 0 0;
        width: 32px;
      }

      .colab-df-generate:hover {
        background-color: #E2EBFA;
        box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
        fill: #174EA6;
      }

      [theme=dark] .colab-df-generate {
        background-color: #3B4455;
        fill: #D2E3FC;
      }

      [theme=dark] .colab-df-generate:hover {
        background-color: #434B5C;
        box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
        filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
        fill: #FFFFFF;
      }
    </style>
    <button class="colab-df-generate" onclick="generateWithVariable('portf_results_df')"
            title="Generate code using this dataframe."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M7,19H8.4L18.45,9,17,7.55,7,17.6ZM5,21V16.75L18.45,3.32a2,2,0,0,1,2.83,0l1.4,1.43a1.91,1.91,0,0,1,.58,1.4,1.91,1.91,0,0,1-.58,1.4L9.25,21ZM18.45,9,17,7.55Zm-12,3A5.31,5.31,0,0,0,4.9,8.1,5.31,5.31,0,0,0,1,6.5,5.31,5.31,0,0,0,4.9,4.9,5.31,5.31,0,0,0,6.5,1,5.31,5.31,0,0,0,8.1,4.9,5.31,5.31,0,0,0,12,6.5,5.46,5.46,0,0,0,6.5,12Z"/>
  </svg>
    </button>
    <script>
      (() => {
      const buttonEl =
        document.querySelector('#id_c3085aaf-d30f-4718-aa39-e1f170d2befc button.colab-df-generate');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      buttonEl.onclick = () => {
        google.colab.notebook.generateWithVariable('portf_results_df');
      }
      })();
    </script>
  </div>

    </div>
  </div>
</div></div>
</div>
<p>Ahora grafiquemos:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">portf_results_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;scatter&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;volatility&quot;</span><span class="p">,</span>
                      <span class="n">y</span><span class="o">=</span><span class="s2">&quot;returns&quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;sharpe_ratio&quot;</span><span class="p">,</span>
                      <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;RdYlGn&quot;</span><span class="p">,</span> <span class="n">edgecolors</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
                      <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">vols_range</span><span class="p">,</span> <span class="n">rtns_range</span><span class="p">,</span> <span class="s2">&quot;b--&quot;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Volatility&quot;</span><span class="p">,</span>
        <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Expected Returns&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Efficient Frontier&quot;</span><span class="p">)</span>

<span class="n">sns</span><span class="o">.</span><span class="n">despine</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/d8747c3b183d96ad6c8cef01c38d6e92478fb22764b8b7f0f88a2bc5372696ef.png" src="_images/d8747c3b183d96ad6c8cef01c38d6e92478fb22764b8b7f0f88a2bc5372696ef.png" />
</div>
</div>
<p>Como se puede apreciar, todos los portfolios caen <strong>por debajo de</strong> la frontera eficiente.</p>
<p>Por otro lado, ¿cuál es el portfolio de mínima varianza?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">min_vol_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">vols_range</span><span class="p">)</span>
<span class="n">min_vol_portf_rtn</span> <span class="o">=</span> <span class="n">rtns_range</span><span class="p">[</span><span class="n">min_vol_ind</span><span class="p">]</span>
<span class="n">min_vol_portf_vol</span> <span class="o">=</span> <span class="n">efficient_portfolios</span><span class="p">[</span><span class="n">min_vol_ind</span><span class="p">][</span><span class="s2">&quot;fun&quot;</span><span class="p">]</span>
<span class="n">min_vol_W</span> <span class="o">=</span> <span class="n">efficient_portfolios</span><span class="p">[</span><span class="n">min_vol_ind</span><span class="p">][</span><span class="s2">&quot;x&quot;</span><span class="p">]</span>

<span class="n">min_vol_portf</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;W&quot;</span><span class="p">:</span> <span class="n">min_vol_W</span><span class="p">,</span>
    <span class="s2">&quot;Return&quot;</span><span class="p">:</span> <span class="n">min_vol_portf_rtn</span><span class="p">,</span>
    <span class="s2">&quot;Volatility&quot;</span><span class="p">:</span> <span class="n">min_vol_portf_vol</span><span class="p">,</span>
    <span class="s2">&quot;Sharpe Ratio&quot;</span><span class="p">:</span> <span class="p">((</span><span class="n">min_vol_portf_rtn</span> <span class="o">-</span> <span class="n">rf</span><span class="p">)</span> <span class="o">/</span> <span class="n">min_vol_portf_vol</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">min_vol_portf</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;W&#39;: array([0.49843381, 0.47038095, 0.00442892, 0.01035853, 0.0163978 ]),
 &#39;Return&#39;: np.float64(0.3668341708542714),
 &#39;Volatility&#39;: np.float64(0.1710206200771919),
 &#39;Sharpe Ratio&#39;: np.float64(2.144034857836261)}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">portf_results_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;scatter&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;volatility&quot;</span><span class="p">,</span>
                      <span class="n">y</span><span class="o">=</span><span class="s2">&quot;returns&quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;sharpe_ratio&quot;</span><span class="p">,</span>
                      <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;RdYlGn&quot;</span><span class="p">,</span> <span class="n">edgecolors</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
                      <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">vols_range</span><span class="p">,</span> <span class="n">rtns_range</span><span class="p">,</span> <span class="s2">&quot;b--&quot;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">min_vol_portf_vol</span><span class="p">,</span> <span class="n">min_vol_portf_rtn</span><span class="p">,</span> <span class="s2">&quot;ro&quot;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Minimum Volatility Portfolio&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Volatility&quot;</span><span class="p">,</span>
        <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Expected Returns&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Efficient Frontier&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">sns</span><span class="o">.</span><span class="n">despine</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/18cab32a27ecabdb3a1e92646bb00986fc4ef0f988fc0a356a4fdbdce5ec4c1d.png" src="_images/18cab32a27ecabdb3a1e92646bb00986fc4ef0f988fc0a356a4fdbdce5ec4c1d.png" />
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="clase2-technical_analysis.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">4. Análisis técnico</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#construccion-de-un-portfolio-equally-weighted">Construcción de un portfolio <em>equally weighted</em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#frontera-eficiente">Frontera eficiente</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Claudio Aracena
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>